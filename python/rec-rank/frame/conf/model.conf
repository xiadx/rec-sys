train-model {
  type="python"
  package=""
  app="python/rec-rank/train/model/wdl_estimator.py"
  arg {
    scene="rec"
    version="v1"
    model="wdl"
    format="tfrecord"
    train-path="/home/operation/xiadingxin/Workspace/rec-sys/data/rec-rank/sample/sample.{scene}.{model}.{version}.{format}.train"
    test-path="/home/operation/xiadingxin/Workspace/rec-sys/data/rec-rank/sample/sample.{scene}.{model}.{version}.{format}.test"
    fmap-path="/user/xiadinxin/rec-sys/python/rec-rank/fmap/{scene}.{model}.{version}.fmap"
    model-dir="wide&deep"
    model-export-dir="wide&deep_export"
    npartitions=200
    days-list {
      train {
        start="20200627"
        end="20200627"
        days=[]
      }
      test {
        start="20200628"
        end="20200628"
        days=[]
      }
    }
    dt-part=true
    ds-param {
      train {
        batch_size=256
        num_epochs=5
        num_parallel_calls=8
        shuffle_factor=10
        prefetch_factor=1
      }
      test {
        batch_size=16384
        num_epochs=1
        num_parallel_calls=8
        shuffle_factor=0
        prefetch_factor=1
      }
    }
    model-param {
      linear-optimizer {
        learning_rate=0.001
        learning_rate_power=-0.5
        initial_accumulator_value=0.1
        l1_regularization_strength=0.0
        l2_regularization_strength=1.0
        l2_shrinkage_regularization_strength=0.0
        name="Ftrl"
      }
      dnn-optimizer {
        learning_rate=0.1
        initial_accumulator_value=0.1
        epsilon=1e-7
        name="Adagrad"
      }
      dnn-hidden-units=[128, 64, 32, 16]
    }
    label="label"
    features=[
      {
        name="label"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=-1
        scope="ignore"
      }
      {
        name="al_static_score"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="als_ui_cosine"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_click_1"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_click_3"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_click_30"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_click_7"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_ctr_1_v2"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_ctr_30_v2"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_ctr_3_v2"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_ctr_7_v2"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_view_1"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_view_3"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_view_30"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_article_view_7"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_click_1"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_click_3"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_click_30"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_click_7"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_view_1"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_view_3"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_view_30"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="doubleFlow_user_view_7"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="favorite"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="item_duration"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="item_type"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="lat"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="lng"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="music"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="pv"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="reply"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="tags_ui_cosine_30_v1"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="timeFlag"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
      {
        name="ui_cosine_90"
        alias=""
        column="numeric_column"
        dtype="tf.float32"
        shape=1
        default_value=0.0
        scope="wide&deep"
      }
      {
        name="vote"
        alias=""
        column="numeric_column"
        dtype="tf.int64"
        shape=1
        default_value=0
        scope="wide&deep"
      }
    ]
    bucketized=[
      {
        name="al_static_score"
        boundaries=[0.1, 1, 10]
        scope="wide&deep"
      }
      {
        name="als_ui_cosine"
        boundaries=[0.2, 0.4, 0.6, 0.8]
        scope="wide&deep"
      }
    ]
    embedding=[

    ]
    cross=[

    ]
  }
}